import{V as r,j as n,v as l,W as x,ae as c,M as _,c as v,b as s,o as b}from"./entry.5eee13ba.js";import{a as y,b as w}from"./mermaid.4b1cd600.js";import{f as R,j as $}from"./join.4243fb1a.js";import{t as C}from"./toString.53aed50c.js";import"./_arrayEach.0e9334a0.js";import"./_baseEach.ed2de8af.js";const M={class:"px-4 sm:px-4 lg:px-4"},N=s("div",{class:"sm:flex sm:items-center"},null,-1),k={class:"mt-2 flex flex-col"},A={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},D={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},O={__name:"RegistrationGrid",async setup(j){let i,d;r("grid");const o=n(!1),a=n([]),p=n("");l().$bus.$on("evtSearchRegistration",e=>{h(e)});const m=n(),{data:f}=([i,d]=x(()=>c("Registrations-list-"+Math.random,()=>$fetch("/api/supabase/registration",{initialCache:!1,method:"get"}),"$CQON6Z86GO")),i=await i,d(),i);a.value=f.value;async function h(e){if(o.value=!0,e){const t=[];R(e,function(u,g){C(u)!=""&&t.push(g+"=eq."+u)}),p.value=$(t,"&")}try{let t=await c("Registrations-list-"+Math.random,()=>$fetch("/api/supabase/registration",{initialCache:!1,method:"get"}),"$MGehI74bs8");a.value.length=0,a.value=t.value,r("grid").value.updateConfig({data:a.value}).forceRender(),o.value=!1}catch(t){o.value=!1,l().$toast.show({type:"danger",message:t.message,timeout:6})}}return _(()=>{r("grid").value=new y({columns:[{id:"id",name:"Id.",width:"75px",hidden:!0},{id:"name",data:e=>e.salutation_in_tamil+"."+e.full_name_english,name:"Name",width:"200px"},{id:"email",name:"Email",width:"100px"},{id:"cell_phone_number",name:"Mobile",width:"100px"},{id:"whatsapp_number",name:"WhatsApp",width:"100px"},{id:"btnDelete",name:"",formatter:(e,t)=>w("button",{className:"inline-flex items-center rounded-full border border-transparent bg-red-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>l().$bus.$emit("evtDeleteRegistration",t)},"Delete"),sort:!1,width:"10px"}],sort:!0,pagination:{enabled:!0,limit:10,summary:!0},className:{td:"whitespace-nowrap px-2 py-2 text-sm text-gray-500",table:"min-w-full divide-y divide-gray-300",thead:"bg-gray-50",th:"whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900"},search:!0,fixedHeader:!0,data:a.value}),r("grid").value.render(m.value)}),(e,t)=>(b(),v("div",M,[N,s("div",k,[s("div",A,[s("div",D,[s("div",{ref_key:"gridRef",ref:m},null,512)])])])]))}};export{O as default};
