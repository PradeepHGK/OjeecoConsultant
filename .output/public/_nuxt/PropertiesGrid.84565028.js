import{V as p,j as n,v as r,W as b,ae as f,M as _,c as v,b as s,o as y}from"./entry.5eee13ba.js";import{a as w,b as i}from"./mermaid.4b1cd600.js";import{f as $,j as P}from"./join.4243fb1a.js";import{t as C}from"./truncate.7e323d76.js";import{t as N}from"./toString.53aed50c.js";import"./_arrayEach.0e9334a0.js";import"./_baseEach.ed2de8af.js";import"./_stringToArray.5b71c590.js";import"./_baseProperty.3973c195.js";import"./toInteger.4d2e8b31.js";const k={class:"px-4 sm:px-4 lg:px-4"},A=s("div",{class:"sm:flex sm:items-center"},null,-1),D={class:"mt-2 flex flex-col"},M={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},q={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},T={__name:"PropertiesGrid",async setup(E){let a,l;const d=p("grid"),o=n(!1),c=n("");r().$bus.$on("evtSearchProperties",t=>{g(t)});const m=n(),{data:x}=([a,l]=b(()=>f("Propertiess-list-"+Math.random,()=>$fetch("/api/properties",{initialCache:!1,method:"get"}),"$IcYGcIOqdm")),a=await a,l(),a);async function g(t){if(o.value=!0,t){const e=[];$(t,function(u,h){N(u)!=""&&e.push(h+"=eq."+u)}),c.value=P(e,"&")}try{let e=await f("Propertiess-list-"+Math.random,()=>$fetch(`/api/properties?${c.value}`,{initialCache:!1,method:"get"}),"$TxX3uMAVbF");p("grid").value.updateConfig({data:e.data._rawValue}).forceRender(),o.value=!1}catch(e){o.value=!1,r().$toast.show({type:"danger",message:e.message,timeout:6})}}return _(()=>{d.value=new w({columns:[{id:"id",name:"Id.",width:"25px"},{id:"parent_code",name:"Parent Code",width:"100px"},{id:"code",name:"Code",width:"100px"},{name:"Name",data:t=>i("span",{className:"truncate"},C(t.name,{length:50}))},{name:"Status",data:t=>{let e=t.is_active?"text-blue-700 bg-blue-50":"text-gray-800 bg-gray-50";return i("span",{className:`inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium  ${e}`},t.is_active?"Active":"Disabled")},sort:!1,width:"25px"},{id:"btnDelete",name:"",formatter:(t,e)=>i("button",{className:"inline-flex items-center rounded-full border border-transparent bg-red-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>r().$bus.$emit("evtDeleteProperties",e)},"Delete"),sort:!1,width:"10px"},{id:"btnEdit",name:"",formatter:(t,e)=>i("button",{className:"inline-flex items-center rounded-full border border-transparent bg-lime-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-lime-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>r().$bus.$emit("evtUpsertProperties",e)},"Edit"),sort:!1,width:"50px"}],sort:!0,pagination:{enabled:!0,limit:10,summary:!0},className:{td:"whitespace-nowrap px-2 py-2 text-sm text-gray-500",table:"min-w-full divide-y divide-gray-300",thead:"bg-gray-50",th:"whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900"},search:!0,fixedHeader:!0,data:x.value}),d.value.render(m.value)}),(t,e)=>(y(),v("div",k,[A,s("div",D,[s("div",M,[s("div",q,[s("div",{ref_key:"gridRef",ref:m},null,512)])])])]))}};export{T as default};
