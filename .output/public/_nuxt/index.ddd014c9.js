import{_ as p,a as f}from"./SoftwareVersion.259c96c0.js";import{_}from"./SecondaryNav.0f62e6aa.js";import{j as m,v as t,aM as u,c as v,b as e,i as d,o as h}from"./entry.5eee13ba.js";import"./Logo.6bb4b00c.js";import"./Icon.84acb30e.js";import"./config.a5798137.js";import"./Icon.vue.2d0699de.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./dom.cb3029af.js";import"./use-tree-walker.2682f761.js";import"./focus-management.fc3e9b19.js";import"./use-outside-click.7b609489.js";import"./use-resolve-button-type.941463e9.js";import"./filter.443d3446.js";import"./_baseIteratee.580569b5.js";import"./toString.53aed50c.js";import"./_baseProperty.3973c195.js";import"./_baseEach.ed2de8af.js";import"./sortBy.8d8ec6a0.js";const g={class:"h-screen flex overflow-hidden bg-gray-50"},x={class:"hidden lg:flex lg:flex-shrink-0"},w={class:"flex flex-col w-64"},y={class:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-gray-100"},$={class:"flex flex-col min-w-0 flex-1 overflow-hidden"},b={class:"flex-1 relative z-0 flex overflow-hidden"},C={class:"flex-1 flex overflow-hidden"},M={class:"flex-1 flex flex-col overflow-y-auto xl:overflow-hidden"},F={class:"flex-1 flex xl:overflow-hidden"},N=e("div",{class:"flex-1 xl:overflow-y-auto"},[e("div",{class:"w-full"})],-1),J={__name:"index",setup(R){const n=m(!1),s=m({});t().$bus.$on("evtUploadSuccess",o=>{let a={};a.logo_url=o.url,a.logo_metadata=o,c(a,"upload")}),t().$bus.$on("evtCompanyFormSubmit",o=>{c(o,"company")});async function c(o,a){try{if(n.value=!0,s.value=o,s.value.tenant="www.xycc-company.com",s.value.updatedAt=t().$dayjs().utc(),settings.value.documents.length==0){s.value.createdAt=t().$dayjs().utc();const{data:l}=await u("/api/settings/create",{method:"post",body:s.value,initialCache:!1,onResponse({request:i,response:r,options:S}){r._data.insertedId?t().$toast.show({type:"success",message:"Record has been inserted successfully",timeout:6}):t().$toast.show({type:"danger",message:"Failure",timeout:6}),n.value=!1}},"$iYqPEFgK1m")}else await u("/api/settings/"+settings.value.documents[0]._id,{method:"put",body:s.value,onResponse({request:l,response:i,options:r}){i._data.modifiedCount>0?(console.log("response._data.modifiedCount=",i._data.modifiedCount),t().$toast.show({type:"success",message:"Record has been updated successfully",timeout:6})):t().$toast.show({type:"danger",message:"Failure",timeout:6}),a=="upload"&&(store.updateLogoUrl(o.logo_url),store.updateLogoMetadata(o.logo_metadata)),n.value=!1}},"$aar5LgMOlM")}catch(l){t().$toast.show({type:"error",message:`Oops!... Something went wrong....<br/>[${l.message}]`,timeout:6}),n.value=!1}finally{}}return(o,a)=>{const l=p,i=f,r=_;return h(),v("div",g,[e("div",x,[e("div",w,[e("div",y,[d(l),d(i)])])]),e("div",$,[e("div",b,[e("main",C,[e("div",M,[e("div",F,[d(r,{title:"CRM",api_end_point:"/_navigation/crm"}),N])])])])])])}}};export{J as default};
