import{V as f,j as c,v as s,W as y,ae as g,M as v,c as _,b as i,o as w}from"./entry.5eee13ba.js";import{a as $,b as r}from"./mermaid.4b1cd600.js";import{f as A,j as N}from"./join.4243fb1a.js";import{t as C}from"./truncate.7e323d76.js";import{t as k}from"./toString.53aed50c.js";import"./_arrayEach.0e9334a0.js";import"./_baseEach.ed2de8af.js";import"./_stringToArray.5b71c590.js";import"./_baseProperty.3973c195.js";import"./toInteger.4d2e8b31.js";const D={class:"px-4 sm:px-4 lg:px-4"},E={class:"mt-2 flex flex-col"},q={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},B={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},T={__name:"ApplicationGrid",async setup(M){let a,d;const o="/api/things/applications",m=f("grid"),n=c(!1),l=c("");s().$bus.$on("evtSearchApplications",t=>{h(t)});const p=c(),{data:x}=([a,d]=y(()=>g("Applications-list-"+Math.random,()=>$fetch(o,{initialCache:!1,method:"get"}),"$EahBTLpQ2y")),a=await a,d(),a);async function h(t){if(n.value=!0,t){const e=[];A(t,function(u,b){k(u)!=""&&e.push(b+"=eq."+u)}),l.value=N(e,"&")}console.log(`query = [${o}?${l.value}]`);try{let e=await g("Applications-list-"+Math.random,()=>$fetch(`${o}?${l.value}`,{initialCache:!1,method:"get"}),"$rAUNDbe5A1");f("grid").value.updateConfig({data:e.data._rawValue}).forceRender(),n.value=!1}catch(e){n.value=!1,s().$toast.show({type:"danger",message:e.message,timeout:6})}}return v(()=>{m.value=new $({columns:[{id:"id",name:"Id.",width:"50px",hidden:!0},{id:"code",name:"Code",width:"150px"},{name:"Name",data:t=>r("span",{className:"truncate"},C(t.name,{length:50}))},{name:"Status",data:t=>{let e=t.is_active?"text-blue-700 bg-blue-50":"text-gray-800 bg-gray-50";return r("span",{className:`inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium  ${e}`},t.is_active?"Active":"Disabled")},sort:!1,width:"25px"},{id:"btnDelete",name:"",formatter:(t,e)=>r("button",{className:"inline-flex items-center rounded-full border border-transparent bg-red-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>s().$bus.$emit("evtDeleteApplications",e)},"Delete"),sort:!1,width:"10px"},{id:"btnEdit",name:"",formatter:(t,e)=>r("button",{className:"inline-flex items-center rounded-full border border-transparent bg-lime-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-lime-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>s().$bus.$emit("evtUpsertApplications",e)},"Edit"),sort:!1,width:"50px"}],sort:!0,pagination:{enabled:!0,limit:10,summary:!0},className:{td:"whitespace-nowrap px-2 py-2 text-sm text-gray-500",table:"min-w-full divide-y divide-gray-300",thead:"bg-gray-50",th:"whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900"},search:!0,fixedHeader:!0,data:x.value}),m.value.render(p.value)}),(t,e)=>(w(),_("div",D,[i("div",E,[i("div",q,[i("div",B,[i("div",{ref_key:"gridRef",ref:p},null,512)])])])]))}};export{T as default};
