import U from"./Icon.84acb30e.js";import{D as j}from"./Dropdownlist.1b365210.js";import{j as u,aK as N,v as r,aM as p,d as t,c as m,b as e,i as f,e as v,x as R,Z as b,aL as x,s as c,l as P,cM as A,o as h,H as I}from"./entry.5eee13ba.js";import{a as V}from"./switch.ce1b5e48.js";import"./config.a5798137.js";import"./Icon.vue.2d0699de.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./dom.cb3029af.js";import"./label.0680d1f4.js";import"./description.3cfaa39b.js";import"./use-resolve-button-type.941463e9.js";const q={key:0,class:"fixed inset-0 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},B={class:"absolute inset-0 overflow-hidden"},F=e("div",{class:"absolute inset-0","aria-hidden":"true"},null,-1),z={class:"absolute inset-y-0 right-0 pl-10 max-w-full flex"},Z={class:"w-screen max-w-md"},H={class:"h-full divide-y divide-gray-200 flex flex-col bg-white shadow-xl"},E={class:"flex-1 h-0 overflow-y-auto"},G={class:"space-y-1 py-6 px-4 bg-primary-700 sm:px-6"},J={class:"flex items-center justify-between space-x-3"},K=e("h2",{class:"text-lg leading-7 font-medium text-white"},"Properties",-1),L={class:"h-7 flex items-center"},O=e("span",{class:"sr-only"},"Close panel",-1),T=e("div",null,[e("p",{class:"text-sm leading-5 text-primary-300"},"Manage custom properties used as configuration varables")],-1),Q={key:0,class:"flex-1 flex flex-col justify-between"},W=I('<div class="space-y-6 pt-6 pb-5"><div class="flex justify-center"><span class="inline-flex"><button type="button" class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-600"><svg class="-ml-1 mr-3 h-5 w-5 animate-spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </button></span></div></div>',1),X=[W],Y={key:1,class:"flex-1 flex flex-col justify-between"},ee={class:"px-4 divide-y divide-gray-200 sm:px-6"},se={class:"space-y-6 pt-6 pb-5"},te=["onSubmit"],oe={class:"sm:overflow-hidden"},ie={class:"bg-white space-y-6"},ae={class:"grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-6"},re={class:"sm:col-span-6"},le={class:"sm:col-span-6"},ne=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Code",-1),de={class:"mt-1"},ce=["readonly"],ue={class:"sm:col-span-6"},pe=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1),me={class:"mt-1"},fe={class:"sm:col-span-6"},_e=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1),ve=e("div",{class:"sm:col-span-3 mt-1"},[e("label",{for:"is_active",class:"block text-sm font-medium text-gray-700"},"Is-active?")],-1),he={class:"sm:col-span-3"},ye={class:"mt-1"},be=e("span",{class:"sr-only"},"Is-active?",-1),xe=e("div",{class:"sm:col-span-3 mt-1"},[e("label",{for:"is_archived",class:"block text-sm font-medium text-gray-700"},"Is-archived?")],-1),ge={class:"sm:col-span-3"},we={class:"mt-1"},ke=e("span",{class:"sr-only"},"Is-archived?",-1),$e={class:"w-full flex-shrink-0 px-4 py-4 space-x-4 flex justify-end"},Pe=e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Reset")],-1),Ve={key:0,class:"inline-flex rounded-md shadow-sm"},Fe={__name:"PropertiesUpsert",setup(Ce){const s=u({is_active:!0,is_archived:!1}),l=u(!1),d=u(!1),C=u(!1),g="/api/properties/",w=N();r().$bus.$on("evtUpsertProperties",i=>{d.value=!d.value,i!==void 0?S(i._cells[0].data):s.value={is_active:!0,is_archived:!1}}),r().$bus.$on("evtDeleteProperties",i=>{M(i._cells[0].data)});function D(i){s.value.parent_code=i.target.value}async function S(i){l.value=!0,p(g+i,{method:"get",initialCache:!1,onResponse({request:o,response:n,options:y}){s.value=n._data[0],l.value=!1}},"$MDsdtmFOuf")}async function k(){try{l.value=!0,s.value.id?await p("/api/properties/"+s.value.id,{method:"put",body:_.omit(s.value,"id"),initialCache:!1,onResponse({request:i,response:o,options:n}){o._data&&(o._data.code?r().$toast.show({type:"danger",message:"Failure during update",timeout:6}):(r().$toast.show({type:"success",message:"Record updated successfully",timeout:6}),$()))}},"$rfjZv3t9fA"):await p("/api/properties/create",{method:"post",body:s.value,initialCache:!1,onResponse({request:i,response:o,options:n}){o._data&&(o._data.code?r().$toast.show({type:"danger",message:"Failure during insert",timeout:6}):(r().$toast.show({type:"success",message:"Record added successfully",timeout:6}),$()))}},"$kqAZmVG3Cu"),l.value=!1,r().$bus.$emit("evtSearchProperties"),s.value={is_active:!0,is_archived:!1},d.value=!d.value}catch(i){console.log(i),l.value=!1}finally{}}async function M(i){try{await p(g+i,{method:"delete",body:{},initialCache:!1,onResponse({request:o,response:n,options:y}){n.status==204?(r().$toast.show({type:"success",message:"Delete was successful",timeout:6}),r().$bus.$emit("evtSearchProperties"),s.value={is_active:!0,is_archived:!1}):r().$toast.show({type:"danger",message:"Failure during delete",timeout:6})}},"$hMJrjZhduM")}catch{}finally{}}async function $(){const i=await A();w.reloadProperties(i.data._rawValue)}return(i,o)=>{const n=U,y=j;return t(d)?(h(),m("section",q,[e("div",B,[F,e("div",z,[e("div",Z,[e("div",H,[e("div",E,[e("header",G,[e("div",J,[K,e("div",L,[e("button",{onClick:o[0]||(o[0]=a=>d.value=!1),"aria-label":"Close panel",class:"rounded-md bg-primary-700 text-primary-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},[O,f(n,{name:"material-symbols:close",class:"h-6 w-6","aria-hidden":"true"})])])]),T]),t(l)?(h(),m("div",Q,X)):v("",!0),t(l)?v("",!0):(h(),m("div",Y,[e("div",ee,[e("div",se,[e("form",{name:"frmProperties",id:"frmProperties",class:"space-y-8 divide-y divide-gray-200",onSubmit:R(k,["prevent"])},[e("div",oe,[e("div",ie,[e("div",ae,[e("div",re,[f(y,{data:{data:t(w).parent_properties},onChange:D,show_label:"true",modelValue:t(s).parent_code,"onUpdate:modelValue":o[1]||(o[1]=a=>t(s).parent_code=a),name:"parent_code",label:"Parent",selected_value:t(s).parent_code},null,8,["data","modelValue","selected_value"])]),e("div",le,[ne,e("div",de,[b(e("input",{readonly:t(s).id,type:"text",id:"code",name:"code","onUpdate:modelValue":o[2]||(o[2]=a=>t(s).code=a),class:c(["block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300",[t(s).id?"bg-gray-100":""]])},null,10,ce),[[x,t(s).code]])])]),e("div",ue,[pe,e("div",me,[b(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[3]||(o[3]=a=>t(s).name=a),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[x,t(s).name]])])]),e("div",fe,[_e,b(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=a=>t(s).description=a),id:"description",name:"description",rows:"3",class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300"},null,512),[[x,t(s).description]])]),ve,e("div",he,[e("div",ye,[f(t(V),{id:"is_active",name:"is_active",modelValue:t(s).is_active,"onUpdate:modelValue":o[5]||(o[5]=a=>t(s).is_active=a),class:c([t(s).is_active?"bg-primary-800":"bg-primary-500","relative inline-flex h-[34px] w-[66px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"])},{default:P(()=>[be,e("span",{"aria-hidden":"true",class:c([t(s).is_active?"translate-x-9":"translate-x-0","pointer-events-none inline-block h-[30px] w-[30px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"])])]),xe,e("div",ge,[e("div",we,[f(t(V),{id:"is_archived",name:"is_archived",modelValue:t(s).is_archived,"onUpdate:modelValue":o[6]||(o[6]=a=>t(s).is_archived=a),class:c([t(s).is_archived?"bg-primary-800":"bg-primary-500","relative inline-flex h-[34px] w-[66px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"])},{default:P(()=>[ke,e("span",{"aria-hidden":"true",class:c([t(s).is_archived?"translate-x-9":"translate-x-0","pointer-events-none inline-block h-[30px] w-[30px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"])])])])])])],40,te)])])]))]),e("div",$e,[Pe,t(C)?(h(),m("span",Ve,[e("button",{onClick:o[7]||(o[7]=a=>("useNuxtApp"in i?i.useNuxtApp:t(r))().$bus.$emit("evtDeleteProperties",t(s))),type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-primary-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Delete")])):v("",!0),e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{onClick:k,type:"submit",class:"zyn-button"},"Save")])])])])])])])):v("",!0)}}};export{Fe as default};
