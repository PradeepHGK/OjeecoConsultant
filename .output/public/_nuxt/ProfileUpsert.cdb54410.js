import{j as m,v as l,aI as f,aM as _,d as s,c as r,b as e,i as k,e as u,x as $,t as P,Z as y,aL as h,o as d,H as C}from"./entry.5eee13ba.js";import{r as S}from"./XMarkIcon.eb0e8bbc.js";const V={key:0,class:"fixed inset-0 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},N={class:"absolute inset-0 overflow-hidden"},j=e("div",{class:"absolute inset-0","aria-hidden":"true"},null,-1),U={class:"absolute inset-y-0 right-0 pl-10 max-w-full flex"},D={class:"w-screen max-w-md"},R={class:"h-full divide-y divide-gray-200 flex flex-col bg-white shadow-xl"},A={class:"flex-1 h-0 overflow-y-auto"},B={class:"space-y-1 py-6 px-4 bg-primary-700 sm:px-6"},F={class:"flex items-center justify-between space-x-3"},M=e("h2",{class:"text-lg leading-7 font-medium text-white"},"Profile",-1),q={class:"h-7 flex items-center"},z=e("span",{class:"sr-only"},"Close panel",-1),E=e("div",null,[e("p",{class:"text-sm leading-5 text-primary-300"},"Your basic profile details visible to general public.")],-1),H={key:0,class:"flex-1 flex flex-col justify-between"},L=C('<div class="space-y-6 pt-6 pb-5"><div class="flex justify-center"><span class="inline-flex"><button type="button" class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-600"><svg class="-ml-1 mr-3 h-5 w-5 animate-spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </button></span></div></div>',1),W=[L],Y={key:1,class:"flex-1 flex flex-col justify-between"},Z={class:"px-4 divide-y divide-gray-200 sm:px-6"},G={class:"space-y-6 pt-6 pb-5"},I=["onSubmit"],K={class:"sm:overflow-hidden"},O={class:"bg-white space-y-6"},T={class:"sm:col-span-6"},X={class:"space-y-4 sm:grid sm:grid-cols-3 sm:items-start sm:gap-6 sm:space-y-0"},J=["src","alt"],Q={key:1,class:"aspect-[3/2] w-full rounded-2xl object-cover",src:"https://via.placeholder.com/100.png",alt:"Placeholder image"},ee={key:2,class:"sm:col-span-2"},se={class:"space-y-1 text-lg font-medium leading-6"},te={class:"text-lg font-semibold text-gray-900"},ae=e("p",{class:"text-base leading-7 text-gray-600"},"System Analyst",-1),oe={class:"grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-6"},ie={class:"sm:col-span-6"},le=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1),ne={class:"mt-1"},re={class:"sm:col-span-6"},de=e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"First Name",-1),ce={class:"mt-1"},ue={class:"sm:col-span-6"},me=e("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Last Name",-1),pe={class:"mt-1"},fe={class:"w-full flex-shrink-0 px-4 py-4 space-x-4 flex justify-end"},_e=e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Reset")],-1),ye={key:0,class:"inline-flex rounded-md shadow-sm"},xe={__name:"ProfileUpsert",setup(he){const t=m({}),n=m(!1),c=m(!1),g=m(!1),p="/api/profiles/";l().$bus.$on("evtUpsertProfile",i=>{c.value=!c.value,x(f().value.id)}),l().$bus.$on("evtDeleteProfile",i=>{b(f().value.id)});async function x(i){n.value=!0,_(p+i+"?*",{method:"get",initialCache:!1,onResponse({request:a,response:o,options:w}){t.value=o._data[0],n.value=!1}},"$enGUScRdcg")}async function v(){try{n.value=!0,await _(p+f().value.id,{method:"put",body:t.value,initialCache:!1,onResponse({request:i,response:a,options:o}){a._data?(l().$toast.show({type:"success",message:"Record updated successfully",timeout:6}),reloadProfilesStore()):l().$toast.show({type:"danger",message:"Failure during update",timeout:6})}},"$ehcYufXK9b"),n.value=!1,t.value={},c.value=!c.value}catch(i){console.log(i),n.value=!1}finally{}}async function b(i){try{await _(p+i,{method:"delete",body:{},initialCache:!1,onResponse({request:a,response:o,options:w}){o._data.status==200?(l().$toast.show({type:"success",message:`Delete [${o._data.data[0].email}] was successful`,timeout:6}),l().$bus.$emit("evtSearchProfiles"),t.value={}):l().$toast.show({type:"danger",message:"Failure during delete",timeout:6})}},"$Zwsi1WiWO8")}catch{}finally{}}return(i,a)=>s(c)?(d(),r("section",V,[e("div",N,[j,e("div",U,[e("div",D,[e("div",R,[e("div",A,[e("header",B,[e("div",F,[M,e("div",q,[e("button",{onClick:a[0]||(a[0]=o=>c.value=!1),"aria-label":"Close panel",class:"rounded-md bg-primary-700 text-primary-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},[z,k(s(S),{class:"h-6 w-6","aria-hidden":"true"})])])]),E]),s(n)?(d(),r("div",H,W)):u("",!0),s(n)?u("",!0):(d(),r("div",Y,[e("div",Z,[e("div",G,[e("form",{name:"frmProfiles",id:"frmProfiles",class:"space-y-8 divide-y divide-gray-200",onSubmit:$(v,["prevent"])},[e("div",K,[e("div",O,[e("div",T,[e("div",X,[s(t).avatar_url?(d(),r("img",{key:0,class:"aspect-[3/2] w-full rounded-2xl object-cover",src:s(t).avatar_url,alt:s(t).last_name+" "+s(t).first_name},null,8,J)):(d(),r("img",Q)),s(t).first_name?(d(),r("div",ee,[e("div",se,[e("h3",te,P(s(t).last_name+","+s(t).first_name),1),ae])])):u("",!0)])]),e("div",oe,[e("div",ie,[le,e("div",ne,[y(e("input",{type:"text",id:"email",name:"email","onUpdate:modelValue":a[1]||(a[1]=o=>s(t).email=o),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[h,s(t).email]])])]),e("div",re,[de,e("div",ce,[y(e("input",{type:"text",id:"first_name",name:"first_name","onUpdate:modelValue":a[2]||(a[2]=o=>s(t).first_name=o),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[h,s(t).first_name]])])]),e("div",ue,[me,e("div",pe,[y(e("input",{type:"text",id:"last_name",name:"last_name","onUpdate:modelValue":a[3]||(a[3]=o=>s(t).last_name=o),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[h,s(t).last_name]])])])])])])],40,I)])])]))]),e("div",fe,[_e,s(g)?(d(),r("span",ye,[e("button",{onClick:a[4]||(a[4]=o=>("useNuxtApp"in i?i.useNuxtApp:s(l))().$bus.$emit("evtDeleteProfile",s(t))),type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-primary-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Delete")])):u("",!0),e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{onClick:v,type:"submit",class:"zyn-button"},"Save")])])])])])])])):u("",!0)}};export{xe as default};
