import{j as u,v as l,aM as p,d as t,c as m,b as e,e as h,x as C,Z as v,aL as y,s as c,i as b,l as g,o as f,H as z}from"./entry.5eee13ba.js";import{a as w}from"./switch.ce1b5e48.js";import"./dom.cb3029af.js";import"./label.0680d1f4.js";import"./description.3cfaa39b.js";import"./use-resolve-button-type.941463e9.js";const D={key:0,class:"fixed inset-0 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},M={class:"absolute inset-0 overflow-hidden"},N=e("div",{class:"absolute inset-0","aria-hidden":"true"},null,-1),S={class:"absolute inset-y-0 right-0 pl-10 max-w-full flex"},U={class:"w-screen max-w-md"},j={class:"h-full divide-y divide-gray-200 flex flex-col bg-white shadow-xl"},R={class:"flex-1 h-0 overflow-y-auto"},B={class:"space-y-1 py-6 px-4 bg-gray-200 bg-opacity-50 sm:px-6"},I={class:"flex items-center justify-between space-x-3"},q=e("h2",{class:"text-lg leading-7 font-medium text-gray-700"},"Applications",-1),F={class:"h-7 flex items-center"},H=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),J=[H],L=e("div",null,[e("p",{class:"text-sm leading-5 text-gray-500"},"Manage...")],-1),P={key:0,class:"flex-1 flex flex-col justify-between"},T=z('<div class="space-y-6 pt-6 pb-5"><div class="flex justify-center"><span class="inline-flex"><button type="button" class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-600"><svg class="-ml-1 mr-3 h-5 w-5 animate-spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </button></span></div></div>',1),E=[T],O={key:1,class:"flex-1 flex flex-col justify-between"},Q={class:"px-4 divide-y divide-gray-200 sm:px-6"},X={class:"space-y-6 pt-6 pb-5"},Z=["onSubmit"],G={class:"sm:overflow-hidden"},K={class:"bg-white space-y-6"},W={class:"grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-6"},Y={class:"sm:col-span-6"},ee=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Code",-1),se={class:"mt-1"},te=["readonly"],ae={class:"sm:col-span-6"},ie=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1),oe={class:"mt-1"},le={class:"sm:col-span-6"},ne=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1),de=e("div",{class:"sm:col-span-3 mt-1"},[e("label",{for:"is_active",class:"block text-sm font-medium text-gray-700"},"Is-active?")],-1),ce={class:"sm:col-span-3"},re={class:"mt-1"},ue=e("span",{class:"sr-only"},"Is-active?",-1),pe=e("div",{class:"sm:col-span-3 mt-1"},[e("label",{for:"is_archived",class:"block text-sm font-medium text-gray-700"},"Is-archived?")],-1),me={class:"sm:col-span-3"},he={class:"mt-1"},fe=e("span",{class:"sr-only"},"Is-archived?",-1),ve={class:"w-full flex-shrink-0 px-4 py-4 space-x-4 flex justify-end"},_e=e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Reset")],-1),ye={key:0,class:"inline-flex rounded-md shadow-sm"},Ve={__name:"ApplicationUpsert",setup(xe){const s=u({is_active:!0,is_archived:!1}),n=u(!1),d=u(!1),k=u(!1),r="/api/things/applications/";l().$bus.$on("evtUpsertApplications",o=>{d.value=!d.value,o!==void 0?$(o._cells[0].data):s.value={is_active:!0,is_archived:!1}}),l().$bus.$on("evtDeleteApplications",o=>{A(o._cells[0].data)});async function $(o){n.value=!0,p(r+o,{method:"get",initialCache:!1,onResponse({request:a,response:i,options:V}){s.value=i._data[0],n.value=!1}},"$pxkFerdApf")}async function x(){try{n.value=!0,s.value.id?await p(r+s.value.id,{method:"put",body:_.omit(s.value,"id"),initialCache:!1,onResponse({request:o,response:a,options:i}){a._data&&(a._data.code?l().$toast.show({type:"danger",message:"Failure during update",timeout:6}):(l().$toast.show({type:"success",message:"Record updated successfully",timeout:6}),reloadApplicationsStore()))}},"$PM3nhOHq5V"):await p(r+"create",{method:"post",body:s.value,initialCache:!1,onResponse({request:o,response:a,options:i}){a._data&&(a._data.code?l().$toast.show({type:"danger",message:"Failure during insert",timeout:6}):(l().$toast.show({type:"success",message:"Record added successfully",timeout:6}),reloadApplicationsStore()))}},"$TQunJhyXAc"),n.value=!1,l().$bus.$emit("evtSearchApplications"),s.value={is_active:!0,is_archived:!1},d.value=!d.value}catch(o){console.log(o),n.value=!1}finally{}}async function A(o){try{await p(r+o,{method:"delete",body:{},initialCache:!1,onResponse({request:a,response:i,options:V}){i.status==200?(l().$toast.show({type:"success",message:"Delete was successful",timeout:6}),l().$bus.$emit("evtSearchApplications"),s.value={is_active:!0,is_archived:!1}):l().$toast.show({type:"danger",message:"Failure during delete",timeout:6})}},"$VxIDIDJVhC")}catch{}finally{}}return(o,a)=>t(d)?(f(),m("section",D,[e("div",M,[N,e("div",S,[e("div",U,[e("div",j,[e("div",R,[e("header",B,[e("div",I,[q,e("div",F,[e("button",{onClick:a[0]||(a[0]=i=>d.value=!1),"aria-label":"Close panel",class:"rounded-md bg-primary-700 text-primary-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},J)])]),L]),t(n)?(f(),m("div",P,E)):h("",!0),t(n)?h("",!0):(f(),m("div",O,[e("div",Q,[e("div",X,[e("form",{name:"frmApplications",id:"frmApplications",class:"space-y-8 divide-y divide-gray-200",onSubmit:C(x,["prevent"])},[e("div",G,[e("div",K,[e("div",W,[e("div",Y,[ee,e("div",se,[v(e("input",{readonly:t(s).id,type:"text",id:"code",name:"code","onUpdate:modelValue":a[1]||(a[1]=i=>t(s).code=i),class:c(["block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300",[t(s).id?"bg-gray-100":""]])},null,10,te),[[y,t(s).code]])])]),e("div",ae,[ie,e("div",oe,[v(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":a[2]||(a[2]=i=>t(s).name=i),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[y,t(s).name]])])]),e("div",le,[ne,v(e("textarea",{"onUpdate:modelValue":a[3]||(a[3]=i=>t(s).description=i),id:"description",name:"description",rows:"3",class:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300"},null,512),[[y,t(s).description]])]),de,e("div",ce,[e("div",re,[b(t(w),{id:"is_active",name:"is_active",modelValue:t(s).is_active,"onUpdate:modelValue":a[4]||(a[4]=i=>t(s).is_active=i),class:c(t(s).is_active?"zyn-swatch-button zyn-swatch-selected":"zyn-swatch-button zyn-swatch-unselected")},{default:g(()=>[ue,e("span",{"aria-hidden":"true",class:c([t(s).is_active?"translate-x-9":"translate-x-0","pointer-events-none inline-block h-[30px] w-[30px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"])])]),pe,e("div",me,[e("div",he,[b(t(w),{id:"is_archived",name:"is_archived",modelValue:t(s).is_archived,"onUpdate:modelValue":a[5]||(a[5]=i=>t(s).is_archived=i),class:c(t(s).is_archived?"zyn-swatch-button zyn-swatch-selected":"zyn-swatch-button zyn-swatch-unselected")},{default:g(()=>[fe,e("span",{"aria-hidden":"true",class:c([t(s).is_archived?"translate-x-9":"translate-x-0","pointer-events-none inline-block h-[30px] w-[30px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"])])])])])])],40,Z)])])]))]),e("div",ve,[_e,t(k)?(f(),m("span",ye,[e("button",{onClick:a[6]||(a[6]=i=>("useNuxtApp"in o?o.useNuxtApp:t(l))().$bus.$emit("evtDeleteApplications",t(s))),type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-primary-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Delete")])):h("",!0),e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{onClick:x,type:"submit",class:"zyn-button"},"Save")])])])])])])])):h("",!0)}};export{Ve as default};
