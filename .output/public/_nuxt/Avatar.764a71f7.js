import{j as r,v as m,c as g,b as e,x as b,t as k,e as U,s as S,o as v,aI as A,aM as C}from"./entry.5eee13ba.js";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var h=0;h<i.length;h++)F[i.charCodeAt(h)]=h;var $=function(f){var s=new Uint8Array(f),a,n=s.length,t="";for(a=0;a<n;a+=3)t+=i[s[a]>>2],t+=i[(s[a]&3)<<4|s[a+1]>>4],t+=i[(s[a+1]&15)<<2|s[a+2]>>6],t+=i[s[a+2]&63];return n%3===2?t=t.substring(0,t.length-1)+"=":n%3===1&&(t=t.substring(0,t.length-2)+"=="),t};const j=["show"],B={class:"mt-5 md:col-span-2 md:mt-0"},N=["onSubmit"],M={class:"shadow sm:overflow-hidden sm:rounded-md"},G={class:"space-y-6 bg-white px-4 py-5 sm:p-6"},I={class:"mt-6 flex-grow lg:mt-0 lg:ml-6 lg:flex-shrink-0 lg:flex-grow-0"},O={class:"relative hidden overflow-hidden lg:block"},H=["src"],z={for:"desktop-user-photo",class:"absolute inset-0 flex w-52 h-52 rounded-2xl items-center justify-center bg-gray-700 bg-opacity-75 text-sm font-medium text-white opacity-0 focus-within:opacity-100 hover:opacity-100"},D=e("span",{class:"text-white"},"Change",-1),J=e("span",{class:"sr-only"},"user photo",-1),L={class:"hidden"},P=e("label",{class:"block text-sm font-medium text-gray-700"},"Cover photo",-1),V={class:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6"},q={class:"space-y-1 text-center"},E=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),K={class:"flex text-sm text-gray-600"},R={for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-medium text-primary-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2 hover:text-primary-500"},W=e("span",null,"Upload a file",-1),Q=e("p",{class:"pl-1"},"or drag and drop",-1),T=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),X={class:"flex flex-shrink-0 justify-end gap-x-4 px-4 py-4"},Y={key:0,class:"text-sm leading-5 text-gray-400 text-center"},Z=["disabled"],ae={__name:"Avatar",props:{image_src:{type:String}},setup(f){const s=f,a=r(!0),n=r(!1),t=r({}),d=r([]),c=r(!1),_=r(0);m().$bus.$on("evtUploaderForm",u=>{n.value=!1});const y=u=>{c.value=!0;let o=u.target.files;for(let l=0;l<o.length;l++)d.value.push(o[l])};async function w(u){try{n.value=!0,t.value.tenant="www.xycc-company.com";const l=await d.value[0].arrayBuffer();let x=new Int8Array(l);t.value.fileData=$(x),t.value.fileName=d.value[0].name,t.value.id=A().value.id,await C("/api/upload/avatar",{method:"post",body:t.value,onResponse({request:ee,response:p,options:te}){console.log(JSON.stringify(p)),p._data.status==200?m().$toast.show({type:"success",message:"Upload was successful",timeout:6}):m().$toast.show({type:"danger",message:`Oops!... Something went wrong....<br/>[${p._data.message}]`,timeout:6}),n.value=!1,c.value=!1,d.value=[],_.value+=1,s.image_src=p._data.avatar_url}},"$GWHpusgc3n")}catch(o){m().$toast.show({type:"error",message:`Oops!... Something went wrong....<br/>[${o.message}]`,timeout:6}),n.value=!1}finally{}}return(u,o)=>(v(),g("div",{show:a.value,class:"space-y-8 divide-y divide-gray sm:space-y-5"},[e("div",B,[e("form",{onSubmit:b(w,["prevent"])},[e("div",M,[e("div",G,[e("div",I,[e("div",O,[(v(),g("img",{class:"aspect-[4/5] w-52 h-52 flex-none rounded-2xl object-cover",src:s.image_src?s.image_src:"https://via.placeholder.com/100.png",alt:"",key:_.value},null,8,H)),e("label",z,[D,J,e("input",{type:"file",id:"desktop-user-photo",onChange:o[0]||(o[0]=l=>y(l)),class:"absolute inset-0 h-full w-full cursor-pointer rounded-md border-gray-300 opacity-0"},null,32)])])]),e("div",L,[P,e("div",V,[e("div",q,[E,e("div",K,[e("label",R,[W,e("input",{id:"file-upload",name:"file-upload",type:"file",multiple:"",onChange:o[1]||(o[1]=l=>y(l)),class:"sr-only"},null,32)]),Q]),T])])])]),e("div",X,[c.value==!0?(v(),g("p",Y,k(d.value[0].name),1)):U("",!0),e("button",{type:"submit",class:S(["zyn-button",[c.value?"":"disabled:opacity-75"]]),disabled:!c.value},"Upload",10,Z)])])],40,N)])],8,j))}};export{ae as default};
