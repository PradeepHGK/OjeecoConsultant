import{D as $}from"./Dropdownlist.1b365210.js";import{W as g,c,b as e,e as p,x as k,i as y,d as f,Z as C,aL as w,aM as m,w as V,v as n,ae as b,o as h,H as D}from"./entry.5eee13ba.js";import"./_plugin-vue_export-helper.c27b6911.js";const U={key:0,class:"fixed inset-0 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},S={class:"absolute inset-0 overflow-hidden"},A=e("div",{class:"absolute inset-0","aria-hidden":"true"},null,-1),I={class:"absolute inset-y-0 right-0 pl-10 max-w-full flex"},j={class:"w-screen max-w-md"},q={class:"h-full divide-y divide-gray-200 flex flex-col bg-white shadow-xl"},M={class:"flex-1 h-0 overflow-y-auto"},R={class:"space-y-1 py-6 px-4 bg-primary-200 bg-opacity-50 sm:px-6"},B={class:"flex items-center justify-between space-x-3"},N=e("h2",{class:"text-lg leading-7 font-medium text-gray-700"},"Configuration",-1),H={class:"h-7 flex items-center"},E=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),L=[E],T=e("div",null,[e("p",{class:"text-sm leading-5 text-gray-500"},"Create or update Configuration")],-1),Y={key:0,class:"flex-1 flex flex-col justify-between"},z=D('<div class="space-y-6 pt-6 pb-5"><div class="flex justify-center"><span class="inline-flex"><button type="button" class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-600"><svg class="-ml-1 mr-3 h-5 w-5 animate-spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </button></span></div></div>',1),P=[z],O={key:1,class:"flex-1 flex flex-col justify-between"},F={class:"px-4 divide-y divide-gray-200 sm:px-6"},J={class:"space-y-6 pt-6 pb-5"},K={class:"sm:overflow-hidden"},Q={class:"bg-white space-y-6"},W={class:"grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-6"},X=e("div",{class:"sm:col-span-6"},[e("h2",{class:"font-medium text-primary-700"},"Config Information ")],-1),Z={class:"sm:col-span-6"},G={class:"sm:col-span-6"},ee=e("label",{for:"code",class:"block text-sm font-medium text-gray-700"},"Code",-1),te={class:"mt-1"},se=e("p",{class:"mt-2 text-sm text-gray-500"},"An unique string within each property type. If the same string exists within the selected property type, error will be thrown!",-1),oe={class:"sm:col-span-6"},ae=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name or Value",-1),ie={class:"mt-1"},ne=e("p",{class:"mt-2 text-sm text-gray-500"},"This can be any valid string which includes speical characters, numeric values.",-1),le=e("div",{class:"sm:col-span-6"},[e("h2",{class:"font-medium text-primary-700"},"Record Information ")],-1),re={class:"sm:col-span-6"},de={class:"sm:col-span-6"},ue={class:"w-full flex-shrink-0 px-4 py-4 space-x-4 flex justify-end"},ce=e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Reset")],-1),pe={key:0,class:"inline-flex rounded-md shadow-sm"},fe={class:"inline-flex rounded-md shadow-sm"};let v="/api/configurations/";const me={components:{},data(){return{isUpsertConfigurationVisible:!1,isDeleteButtonVisible:!1,data:{},date:new Date,progress:!1}},methods:{getConfiguration(a){this.progress=!0;const{data:s}=m(v+a,{method:"post",initialCache:!1,onResponse({request:l,response:r,options:u}){this.data=r._data.document,this.progress=!1}},"$qMYb4Uiesg");V(s,()=>{console.log("Configuration = ",JSON.stringify(s)),this.data=s._rawValue.document,this.isDeleteButtonVisible=!0,this.progress=!1})},async upsertConfiguration(a){try{if(this.progress=!0,this.data._id===void 0){this.data.createdAt=n().$dayjs().utc(),this.data.updatedAt=n().$dayjs().utc();const{data:s}=await m(v+"create",{method:"post",body:this.data,initialCache:!1,onResponse({request:l,response:r,options:u}){r._data.insertedId&&n().$toast.show({type:"success",message:`Configuration [${r._data.insertedId}] added successfully`,timeout:6})}},"$EHvcY4LvpE")}else{const{data:s}=await m(v+this.data._id,{method:"put",body:_.omit(this.data,"_id"),initialCache:!1,onResponse({request:l,response:r,options:u}){r._data.modifiedCount>0&&n().$toast.show({type:"success",message:"Record has been updated successfully",timeout:6})}},"$D3eE7iQAB5")}this.progress=!1,n().$bus.$emit("evtSearchConfiguration",{filter:{},limit:10}),this.data={}}catch(s){console.log(s),this.progress=!1}finally{}},async deleteConfiguration(){try{await m("/api/configurations/"+this.data._id,{method:"delete",body:{},initialCache:!1,onResponse({request:a,response:s,options:l}){s._data.deletedCount==1?(console.log("deletedCount = ",s._data.deletedCount),n().$toast.show({type:"success",message:"Delete was successful",timeout:6}),this.progress=!1,this.isUpsertConfigurationVisible=!1,n().$bus.$emit("evtSearchConfiguration",{filter:{},limit:10}),this.data={}):(this.progress=!1,n().$toast.show({type:"error",message:"The delete failed...",timeout:6}))}},"$YUAlV3AHhL")}catch{}finally{}},async closeConfigurationPanel(){this.data={},this.isUpsertConfigurationVisible=!this.isUpsertConfigurationVisible},handleSelectedInConfiguration_record_status(a){this.data.record_status=a.target.value},handleSelectedInConfiguration_mark_as_delete(a){this.data.mark_as_delete=a.target.value},handleSelectedInConfiguration_property_type(a){this.data.property_type=a.target.value}},created(){n().$bus.$on("evtUpsertConfiguration",a=>{a!==void 0&&this.getConfiguration(a._cells[0].data),this.isUpsertConfigurationVisible=!this.isUpsertConfigurationVisible}),n().$bus.$on("evtDeleteConfiguration",a=>{a!==void 0&&(this.data=a,this.deleteConfiguration())})},beforeDestroy(){n().$bus.$off("evtUpsertConfiguration"),n().$bus.$off("evtDeleteConfiguration")}},ye=Object.assign(me,{__name:"ConfigurationUpsert",async setup(a){let s,l;const{data:r}=([s,l]=g(()=>b("record_status-list-"+Math.random,()=>$fetch("/api/generic",{initialCache:!1,method:"post",body:{collection:"properties",projection:{},filter:{property_type:{$eq:"record_status"}},limit:1e4},onResponse({request:t,response:o,options:d}){}}),"$lYrs96fK2H")),s=await s,l(),s),{data:u}=([s,l]=g(()=>b("mark_as_delete-list-"+Math.random,()=>$fetch("/api/generic",{initialCache:!1,method:"post",body:{collection:"properties",projection:{},filter:{property_type:{$eq:"mark_as_delete"}},limit:1e4},onResponse({request:t,response:o,options:d}){}}),"$ulo8fpR7Xu")),s=await s,l(),s),{data:x}=([s,l]=g(()=>b("configuration_types-list-"+Math.random,()=>$fetch("/api/generic",{initialCache:!1,method:"post",body:{collection:"types",projection:{},filter:{record_status:{$eq:"Active"}},limit:1e4},onResponse({request:t,response:o,options:d}){}}),"$ryIuI8MgSp")),s=await s,l(),s);return(t,o)=>{const d=$;return t.isUpsertConfigurationVisible?(h(),c("section",U,[e("div",S,[A,e("div",I,[e("div",j,[e("div",q,[e("div",M,[e("header",R,[e("div",B,[N,e("div",H,[e("button",{onClick:o[0]||(o[0]=i=>t.closeConfigurationPanel()),"aria-label":"Close panel",class:"rounded-md bg-primary-700 text-primary-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},L)])]),T]),t.progress?(h(),c("div",Y,P)):p("",!0),t.progress?p("",!0):(h(),c("div",O,[e("div",F,[e("div",J,[e("form",{name:"frmConfiguration",id:"frmConfiguration",class:"space-y-8 divide-y divide-gray-200",onSubmit:o[6]||(o[6]=k((...i)=>t.upsertConfiguration&&t.upsertConfiguration(...i),["prevent"]))},[e("div",K,[e("div",Q,[e("div",W,[X,e("div",Z,[y(d,{data:{data:f(x).documents},onChange:t.handleSelectedInConfiguration_property_type,show_label:"true",modelValue:t.data.property_type,"onUpdate:modelValue":o[1]||(o[1]=i=>t.data.property_type=i),name:"property_type",label:"Type",selected_value:t.data.property_type},null,8,["data","onChange","modelValue","selected_value"])]),e("div",G,[ee,e("div",te,[C(e("input",{type:"text",id:"code",name:"code","onUpdate:modelValue":o[2]||(o[2]=i=>t.data.code=i),class:"py-3 px-4 block w-full pl-5 focus:ring-lime-600 focus:border-lime-600 border-gray-300"},null,512),[[w,t.data.code]]),se])]),e("div",oe,[ae,e("div",ie,[C(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[3]||(o[3]=i=>t.data.name=i),class:"py-3 px-4 block w-full pl-5 focus:ring-lime-600 focus:border-lime-600 border-gray-300"},null,512),[[w,t.data.name]]),ne])]),le,e("div",re,[y(d,{data:{data:f(r).documents},onChange:t.handleSelectedInConfiguration_record_status,show_label:"true",modelValue:t.data.record_status,"onUpdate:modelValue":o[4]||(o[4]=i=>t.data.record_status=i),name:"record_status",label:"Status",selected_value:t.data.record_status},null,8,["data","onChange","modelValue","selected_value"])]),e("div",de,[y(d,{data:{data:f(u).documents},onChange:t.handleSelectedInConfiguration_mark_as_delete,show_label:"true",modelValue:t.data.mark_as_delete,"onUpdate:modelValue":o[5]||(o[5]=i=>t.data.mark_as_delete=i),name:"mark_as_delete",label:"Mark for Deletion",selected_value:t.data.mark_as_delete},null,8,["data","onChange","modelValue","selected_value"])])])])])],32)])])]))]),e("div",ue,[ce,t.isDeleteButtonVisible?(h(),c("span",pe,[e("button",{onClick:o[7]||(o[7]=i=>("useNuxtApp"in t?t.useNuxtApp:f(n))().$bus.$emit("evtDeleteConfiguration",t.data)),type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-primary-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Delete")])):p("",!0),e("span",fe,[e("button",{onClick:o[8]||(o[8]=(...i)=>t.upsertConfiguration&&t.upsertConfiguration(...i)),type:"submit",class:"zyn-button"},"Save")])])])])])])])):p("",!0)}}});export{ye as default};
