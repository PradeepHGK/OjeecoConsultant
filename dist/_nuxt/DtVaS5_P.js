import{r as m,x as l,k as t,c as r,a as e,C as u,n as w,t as k,q as p,v as f,o as d,H as $}from"./DQim9pRB.js";import{u as _}from"./DgkF2B2v.js";import"./7T40Ad-7.js";import"./xyCIIb-V.js";const U={key:0,class:"fixed inset-0 overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},C={class:"absolute inset-0 overflow-hidden"},V=e("div",{class:"absolute inset-0","aria-hidden":"true"},null,-1),j={class:"absolute inset-y-0 right-0 pl-10 max-w-full flex"},D={class:"w-screen max-w-md"},N={class:"h-full divide-y divide-gray-200 flex flex-col bg-white shadow-xl"},B={class:"flex-1 h-0 overflow-y-auto"},M={class:"space-y-1 py-6 px-4 bg-gray-200 bg-opacity-50 sm:px-6"},S={class:"flex items-center justify-between space-x-3"},q=e("h2",{class:"text-lg leading-7 font-medium text-gray-700"},"Users",-1),A={class:"h-7 flex items-center"},R=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),z=[R],F=e("div",null,[e("p",{class:"text-sm leading-5 text-gray-500"},"Manage...")],-1),H={key:0,class:"flex-1 flex flex-col justify-between"},P=$('<div class="space-y-6 pt-6 pb-5"><div class="flex justify-center"><span class="inline-flex"><button type="button" class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-600"><svg class="-ml-1 mr-3 h-5 w-5 animate-spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing... </button></span></div></div>',1),E=[P],L={key:1,class:"flex-1 flex flex-col justify-between"},Q={class:"px-4 divide-y divide-gray-200 sm:px-6"},J={class:"space-y-6 pt-6 pb-5"},T={class:"sm:overflow-hidden"},X={class:"bg-white space-y-6"},Y={class:"sm:col-span-6"},G={class:"space-y-4 sm:grid sm:grid-cols-3 sm:items-start sm:gap-6 sm:space-y-0"},I=["src","alt"],K={key:1,class:"aspect-[3/2] w-full rounded-2xl object-cover",src:"https://via.placeholder.com/100.png",alt:"Placeholder image"},O={key:2,class:"sm:col-span-2"},W={class:"space-y-1 text-lg font-medium leading-6"},Z={class:"text-lg font-semibold text-gray-900"},ee=e("p",{class:"text-base leading-7 text-gray-600"},"System Analyst",-1),se={class:"grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-6"},te={class:"sm:col-span-6"},ae=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1),oe={class:"mt-1"},ie={class:"sm:col-span-6"},le=e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"First Name",-1),ne={class:"mt-1"},re={class:"sm:col-span-6"},de=e("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Last Name",-1),ce={class:"mt-1"},ue={class:"w-full flex-shrink-0 px-4 py-4 space-x-4 flex justify-end"},me=e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Reset")],-1),pe={key:0,class:"inline-flex rounded-md shadow-sm"},y="/api/profiles/",ge={__name:"UsersUpsert",setup(fe){const s=m({}),n=m(!1),c=m(!1),v=m(!1);l().$bus.$on("evtUpsertUser",o=>{c.value=!c.value,g(o._cells[0].data)}),l().$bus.$on("evtDeleteUser",o=>{x(o._cells[0].data)});async function g(o){n.value=!0,_(y+o+"?*",{method:"get",initialCache:!1,onResponse({request:a,response:i,options:b}){s.value=i._data[0],n.value=!1}},"$JYyqVPbQXt")}async function h(){try{n.value=!0,await _(y+s.value.id,{method:"put",body:s.value,initialCache:!1,onResponse({request:o,response:a,options:i}){a._data?(l().$toast.show({type:"success",message:"Record updated successfully",timeout:6}),l().$bus.$emit("evtSearchUsers")):l().$toast.show({type:"danger",message:"Failure during update",timeout:6})}},"$D30wHQMe7g"),n.value=!1,s.value={},c.value=!c.value}catch(o){console.log(o),n.value=!1}finally{}}async function x(o){try{await _(y+o,{method:"delete",body:{},initialCache:!1,onResponse({request:a,response:i,options:b}){i._data.status==200?(l().$toast.show({type:"success",message:`Delete [${i._data.data[0].email}] was successful`,timeout:6}),l().$bus.$emit("evtSearchUsers"),s.value={}):l().$toast.show({type:"danger",message:"Failure during delete",timeout:6})}},"$rr5za1HvBx")}catch{}finally{}}return(o,a)=>t(c)?(d(),r("section",U,[e("div",C,[V,e("div",j,[e("div",D,[e("div",N,[e("div",B,[e("header",M,[e("div",S,[q,e("div",A,[e("button",{onClick:a[0]||(a[0]=i=>c.value=!1),"aria-label":"Close panel",class:"rounded-md bg-primary-700 text-primary-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},z)])]),F]),t(n)?(d(),r("div",H,E)):u("",!0),t(n)?u("",!0):(d(),r("div",L,[e("div",Q,[e("div",J,[e("form",{name:"frmUsers",id:"frmUsers",class:"space-y-8 divide-y divide-gray-200",onSubmit:w(h,["prevent"])},[e("div",T,[e("div",X,[e("div",Y,[e("div",G,[t(s).avatar_url?(d(),r("img",{key:0,class:"aspect-[3/2] w-full rounded-2xl object-cover",src:t(s).avatar_url,alt:t(s).last_name+" "+t(s).first_name},null,8,I)):(d(),r("img",K)),t(s).first_name?(d(),r("div",O,[e("div",W,[e("h3",Z,k(t(s).last_name+","+t(s).first_name),1),ee])])):u("",!0)])]),e("div",se,[e("div",te,[ae,e("div",oe,[p(e("input",{type:"text",id:"email",name:"email","onUpdate:modelValue":a[1]||(a[1]=i=>t(s).email=i),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[f,t(s).email]])])]),e("div",ie,[le,e("div",ne,[p(e("input",{type:"text",id:"first_name",name:"first_name","onUpdate:modelValue":a[2]||(a[2]=i=>t(s).first_name=i),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[f,t(s).first_name]])])]),e("div",re,[de,e("div",ce,[p(e("input",{type:"text",id:"last_name",name:"last_name","onUpdate:modelValue":a[3]||(a[3]=i=>t(s).last_name=i),class:"block w-full pl-5 focus:ring-primary-600 focus:border-primary-600 border-gray-300"},null,512),[[f,t(s).last_name]])])])])])])],32)])])]))]),e("div",ue,[me,t(v)?(d(),r("span",pe,[e("button",{onClick:a[4]||(a[4]=i=>("useNuxtApp"in o?o.useNuxtApp:t(l))().$bus.$emit("evtDeleteUser",t(s))),type:"button",class:"py-2 px-4 border border-gray-300 text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-primary-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out"},"Delete")])):u("",!0),e("span",{class:"inline-flex rounded-md shadow-sm"},[e("button",{onClick:h,type:"submit",class:"zyn-button"},"Save")])])])])])])])):u("",!0)}};export{ge as default};
