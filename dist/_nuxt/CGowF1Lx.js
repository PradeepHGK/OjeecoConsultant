import{A as re,N as se,E as ie,n as Z,f as W,u as q,d as O}from"./CTSh-Y9R.js";import{i as V,o,E as z,u as j,t as pe,b as A,w as ve,a as ce,h as de,A as R,I as G,P as B,d as k,l as _,N as K,c as x,T as Q}from"./BSL05b4c.js";import{s as fe}from"./B38FtwXJ.js";import{y as H,r as F,m as $,N as ee,M as J,W as C,F as X,I as te,O as le,Q as Y}from"./DQim9pRB.js";var be=(r=>(r[r.Open=0]="Open",r[r.Closed=1]="Closed",r))(be||{});let oe=Symbol("PopoverContext");function U(r){let d=Y(oe,null);if(d===null){let f=new Error(`<${r} /> is missing a parent <${me.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,U),f}return d}let Pe=Symbol("PopoverGroupContext");function ne(){return Y(Pe,null)}let ae=Symbol("PopoverPanelContext");function Se(){return Y(ae,null)}let me=H({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:d,attrs:f,expose:E}){var m;let b=F(null);E({el:b,$el:b});let l=F(1),t=F(null),y=F(null),g=F(null),P=F(null),c=$(()=>V(b)),h=$(()=>{var e,a;if(!o(t)||!o(P))return!1;for(let M of document.querySelectorAll("body > *"))if(Number(M==null?void 0:M.contains(o(t)))^Number(M==null?void 0:M.contains(o(P))))return!0;let n=z(),p=n.indexOf(o(t)),w=(p+n.length-1)%n.length,I=(p+1)%n.length,L=n[w],ue=n[I];return!((e=o(P))!=null&&e.contains(L))&&!((a=o(P))!=null&&a.contains(ue))}),v={popoverState:l,buttonId:F(null),panelId:F(null),panel:P,button:t,isPortalled:h,beforePanelSentinel:y,afterPanelSentinel:g,togglePopover(){l.value=j(l.value,{0:1,1:0})},closePopover(){l.value!==1&&(l.value=1)},close(e){v.closePopover();let a=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?o(e):o(v.button):o(v.button);a==null||a.focus()}};ee(oe,v),pe($(()=>j(l.value,{0:A.Open,1:A.Closed})));let N={buttonId:v.buttonId,panelId:v.panelId,close(){v.closePopover()}},S=ne(),T=S==null?void 0:S.registerPopover,[D,s]=re(),i=se({mainTreeNodeRef:S==null?void 0:S.mainTreeNodeRef,portals:D,defaultContainers:[t,P]});function u(){var e,a,n,p;return(p=S==null?void 0:S.isFocusWithinPopoverGroup())!=null?p:((e=c.value)==null?void 0:e.activeElement)&&(((a=o(t))==null?void 0:a.contains(c.value.activeElement))||((n=o(P))==null?void 0:n.contains(c.value.activeElement)))}return J(()=>T==null?void 0:T(N)),ie((m=c.value)==null?void 0:m.defaultView,"focus",e=>{var a,n;e.target!==window&&e.target instanceof HTMLElement&&l.value===0&&(u()||t&&P&&(i.contains(e.target)||(a=o(v.beforePanelSentinel))!=null&&a.contains(e.target)||(n=o(v.afterPanelSentinel))!=null&&n.contains(e.target)||v.closePopover()))},!0),ve(i.resolveContainers,(e,a)=>{var n;v.closePopover(),ce(a,de.Loose)||(e.preventDefault(),(n=o(t))==null||n.focus())},$(()=>l.value===0)),()=>{let e={open:l.value===0,close:v.close};return C(X,[C(s,{},()=>R({theirProps:{...r,...f},ourProps:{ref:b},slot:e,slots:d,attrs:f,name:"Popover"})),C(i.MainTreeNode)])}}}),Ee=H({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:d,slots:f,expose:E}){var m;let b=(m=r.id)!=null?m:`headlessui-popover-button-${G()}`,l=U("PopoverButton"),t=$(()=>V(l.button));E({el:l.button,$el:l.button}),te(()=>{l.buttonId.value=b}),le(()=>{l.buttonId.value=null});let y=ne(),g=y==null?void 0:y.closeOthers,P=Se(),c=$(()=>P===null?!1:P.value===l.panelId.value),h=F(null),v=`headlessui-focus-sentinel-${G()}`;c.value||J(()=>{l.button.value=o(h)});let N=fe($(()=>({as:r.as,type:d.type})),h);function S(e){var a,n,p,w,I;if(c.value){if(l.popoverState.value===1)return;switch(e.key){case x.Space:case x.Enter:e.preventDefault(),(n=(a=e.target).click)==null||n.call(a),l.closePopover(),(p=o(l.button))==null||p.focus();break}}else switch(e.key){case x.Space:case x.Enter:e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(g==null||g(l.buttonId.value)),l.togglePopover();break;case x.Escape:if(l.popoverState.value!==0)return g==null?void 0:g(l.buttonId.value);if(!o(l.button)||(w=t.value)!=null&&w.activeElement&&!((I=o(l.button))!=null&&I.contains(t.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),l.closePopover();break}}function T(e){c.value||e.key===x.Space&&e.preventDefault()}function D(e){var a,n;r.disabled||(c.value?(l.closePopover(),(a=o(l.button))==null||a.focus()):(e.preventDefault(),e.stopPropagation(),l.popoverState.value===1&&(g==null||g(l.buttonId.value)),l.togglePopover(),(n=o(l.button))==null||n.focus()))}function s(e){e.preventDefault(),e.stopPropagation()}let i=Z();function u(){let e=o(l.panel);if(!e)return;function a(){j(i.value,{[O.Forwards]:()=>B(e,k.First),[O.Backwards]:()=>B(e,k.Last)})===Q.Error&&B(z().filter(n=>n.dataset.headlessuiFocusGuard!=="true"),j(i.value,{[O.Forwards]:k.Next,[O.Backwards]:k.Previous}),{relativeTo:o(l.button)})}a()}return()=>{let e=l.popoverState.value===0,a={open:e},{...n}=r,p=c.value?{ref:h,type:N.value,onKeydown:S,onClick:D}:{ref:h,id:b,type:N.value,"aria-expanded":l.popoverState.value===0,"aria-controls":o(l.panel)?l.panelId.value:void 0,disabled:r.disabled?!0:void 0,onKeydown:S,onKeyup:T,onClick:D,onMousedown:s};return C(X,[R({ourProps:p,theirProps:{...d,...n},slot:a,attrs:d,slots:f,name:"PopoverButton"}),e&&!c.value&&l.isPortalled.value&&C(W,{id:v,features:q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:u})])}}}),we=H({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(r,{attrs:d,slots:f}){let E=U("PopoverOverlay"),m=`headlessui-popover-overlay-${G()}`,b=_(),l=$(()=>b!==null?(b.value&A.Open)===A.Open:E.popoverState.value===0);function t(){E.closePopover()}return()=>{let y={open:E.popoverState.value===0};return R({ourProps:{id:m,"aria-hidden":!0,onClick:t},theirProps:r,slot:y,attrs:d,slots:f,features:K.RenderStrategy|K.Static,visible:l.value,name:"PopoverOverlay"})}}}),Fe=H({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:d,slots:f,expose:E}){var m;let b=(m=r.id)!=null?m:`headlessui-popover-panel-${G()}`,{focus:l}=r,t=U("PopoverPanel"),y=$(()=>V(t.panel)),g=`headlessui-focus-sentinel-before-${G()}`,P=`headlessui-focus-sentinel-after-${G()}`;E({el:t.panel,$el:t.panel}),te(()=>{t.panelId.value=b}),le(()=>{t.panelId.value=null}),ee(ae,t.panelId),J(()=>{var s,i;if(!l||t.popoverState.value!==0||!t.panel)return;let u=(s=y.value)==null?void 0:s.activeElement;(i=o(t.panel))!=null&&i.contains(u)||B(o(t.panel),k.First)});let c=_(),h=$(()=>c!==null?(c.value&A.Open)===A.Open:t.popoverState.value===0);function v(s){var i,u;switch(s.key){case x.Escape:if(t.popoverState.value!==0||!o(t.panel)||y.value&&!((i=o(t.panel))!=null&&i.contains(y.value.activeElement)))return;s.preventDefault(),s.stopPropagation(),t.closePopover(),(u=o(t.button))==null||u.focus();break}}function N(s){var i,u,e,a,n;let p=s.relatedTarget;p&&o(t.panel)&&((i=o(t.panel))!=null&&i.contains(p)||(t.closePopover(),((e=(u=o(t.beforePanelSentinel))==null?void 0:u.contains)!=null&&e.call(u,p)||(n=(a=o(t.afterPanelSentinel))==null?void 0:a.contains)!=null&&n.call(a,p))&&p.focus({preventScroll:!0})))}let S=Z();function T(){let s=o(t.panel);if(!s)return;function i(){j(S.value,{[O.Forwards]:()=>{var u;B(s,k.First)===Q.Error&&((u=o(t.afterPanelSentinel))==null||u.focus())},[O.Backwards]:()=>{var u;(u=o(t.button))==null||u.focus({preventScroll:!0})}})}i()}function D(){let s=o(t.panel);if(!s)return;function i(){j(S.value,{[O.Forwards]:()=>{let u=o(t.button),e=o(t.panel);if(!u)return;let a=z(),n=a.indexOf(u),p=a.slice(0,n+1),w=[...a.slice(n+1),...p];for(let I of w.slice())if(I.dataset.headlessuiFocusGuard==="true"||e!=null&&e.contains(I)){let L=w.indexOf(I);L!==-1&&w.splice(L,1)}B(w,k.First,{sorted:!1})},[O.Backwards]:()=>{var u;B(s,k.Previous)===Q.Error&&((u=o(t.button))==null||u.focus())}})}i()}return()=>{let s={open:t.popoverState.value===0,close:t.close},{focus:i,...u}=r,e={ref:t.panel,id:b,onKeydown:v,onFocusout:l&&t.popoverState.value===0?N:void 0,tabIndex:-1};return R({ourProps:e,theirProps:{...d,...u},attrs:d,slot:s,slots:{...f,default:(...a)=>{var n;return[C(X,[h.value&&t.isPortalled.value&&C(W,{id:g,ref:t.beforePanelSentinel,features:q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:T}),(n=f.default)==null?void 0:n.call(f,...a),h.value&&t.isPortalled.value&&C(W,{id:P,ref:t.afterPanelSentinel,features:q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D})])]}},features:K.RenderStrategy|K.Static,visible:h.value,name:"PopoverPanel"})}}});export{we as $,Ee as G,Fe as j,me as y};
